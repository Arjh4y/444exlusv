<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@444.exlu$v</title>
    <link rel="icon" type="image/x-icon" href="44logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        /* Preloader Styles - Fixed Position & No Scroll */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease-out;
        }

        body.preloader-active {
            overflow: hidden;
            height: 100vh;
        }

        .preloader-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            animation: pulse 2s infinite ease-in-out;
        }

        .preloader-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .preloader-progress-bar {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #444, #888);
            transition: width 0.4s ease;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
        }

        /* Main Content Styles */
        body {
            position: relative;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
            background: #0a0a0a;
            opacity: 0;
            animation: pageLoad 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            animation-delay: 1.5s;
        }

        body.loaded {
            opacity: 1;
            animation: none;
            overflow-y: auto;
        }

        /* Main Container with Scroll */
        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            box-sizing: border-box;
            width: 100%;
        }

        /* Responsive Padding */
        @media (max-width: 768px) {
            .main-container {
                padding: 1.5rem 1rem;
            }
        }

        @media (max-width: 640px) {
            .main-container {
                padding: 1rem 0.75rem;
            }
        }

        /* Background Elements */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('444.png') center/cover no-repeat;
            filter: blur(8px) brightness(0.3);
            z-index: -2;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        body.loaded::before {
            opacity: 1;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(20, 20, 20, 0.9));
            z-index: -1;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        body.loaded::after {
            opacity: 1;
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        body.loaded #particles-js {
            opacity: 1;
        }

        /* Page Load Animation */
        @keyframes pageLoad {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Rest of your existing styles... */
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
        }

        body.loaded .glass-effect {
            opacity: 1;
            transform: translateY(0);
        }

        .profile-image {
            border-radius: 50%;
            transition: all 0.3s ease;
            filter: grayscale(0.2) contrast(1.1);
        }

        .profile-container:hover .profile-image {
            transform: scale(1.1);
            filter: grayscale(0) contrast(1.2);
        }

        .profile-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem;
            height: 100%;
            min-height: 140px;
            border-radius: 16px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            width: 100%;
            transition-delay: calc(var(--delay) * 0.1s);
        }

        .profile-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 16px;
        }

        .profile-container:hover::before {
            opacity: 1;
        }

        .profile-image-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.75rem;
            position: relative;
        }

        .status-dot {
            position: absolute;
            bottom: 15px;
            left: 85px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 3px solid #000000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 50;
        }

        .status-online {
            background: linear-gradient(135deg, #23a55a, #1e8e4f);
            box-shadow: 0 0 15px rgba(35, 165, 90, 0.5);
        }

        .status-idle {
            background: linear-gradient(135deg, #f0b132, #d4960a);
            box-shadow: 0 0 15px rgba(240, 177, 50, 0.5);
        }

        .status-dnd {
            background: linear-gradient(135deg, #f23f43, #d12328);
            box-shadow: 0 0 15px rgba(242, 63, 67, 0.5);
        }

        .status-offline {
            background: linear-gradient(135deg, #80848e, #6c7075);
            box-shadow: 0 0 15px rgba(128, 132, 142, 0.3);
        }

        .profile-name {
            text-align: center;
            word-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
            max-width: 100%;
            line-height: 1.3;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .status-text {
            font-size: 0.75rem;
            color: #999999;
            margin-top: 0.25rem;
            text-align: center;
            max-width: 100%;
            word-wrap: break-word;
            line-height: 1.2;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }


        @keyframes pulse-activity {

            0%,
            100% {
                opacity: 0.8;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        .main-logo {
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.4));
            animation: pulse-logo 4s ease-in-out infinite;
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 1s ease, transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        body.loaded .main-logo {
            opacity: 1;
            transform: scale(1);
        }

        .main-logo:hover {
            filter: drop-shadow(0 0 40px rgba(255, 255, 255, 0.6));
            transform: scale(1.05);
        }

        @keyframes pulse-logo {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.04);
            }
        }

        .typing-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 600px;
            min-height: 2.5rem;
            margin: 0 auto;
            padding: 0 1rem;
            box-sizing: border-box;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            transition-delay: 0.3s;
        }

        body.loaded .typing-container {
            opacity: 1;
            transform: translateY(0);
        }

        .typing-text {
            display: inline-block;
            color: #ffffff;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            border-right: 3px solid #ffffff;
            animation: blink-cursor 1s step-end infinite;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }

        .typing-text.completed {
            border-right: none;
            animation: none;
        }

        .typing-text.glitch {
            animation: glitch 0.4s ease-in-out;
        }

        @keyframes blink-cursor {

            from,
            to {
                border-color: transparent;
            }

            50% {
                border-color: #ffffff;
            }
        }

        @keyframes glitch {
            0% {
                transform: translate(0);
            }

            20% {
                transform: translate(-2px, 2px);
            }

            40% {
                transform: translate(-2px, -2px);
            }

            60% {
                transform: translate(2px, 2px);
            }

            80% {
                transform: translate(2px, -2px);
            }

            100% {
                transform: translate(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-logo .logo-size {
                width: 18rem;
                height: 18rem;
            }

            .text-6xl {
                font-size: 3.5rem;
            }

            .mb-24 {
                margin-bottom: 4rem;
            }

            .typing-text {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 768px) {
            .main-logo .logo-size {
                width: 16rem;
                height: 16rem;
            }

            .text-6xl {
                font-size: 2.75rem;
            }

            .mb-24 {
                margin-bottom: 3rem;
            }

            .typing-text {
                font-size: 1.1rem;
            }

            .profile-container {
                min-height: 120px;
                padding: 0.75rem;
            }
        }

        @media (max-width: 640px) {
            .main-logo .logo-size {
                width: 14rem;
                height: 14rem;
            }

            .text-6xl {
                font-size: 2.25rem;
            }

            .mb-24 {
                margin-bottom: 2rem;
            }

            .typing-text {
                font-size: 1rem;
                white-space: normal;
            }

            .profile-container .w-28 {
                width: 5rem;
                height: 5rem;
            }

            .status-dot {
                width: 14px;
                height: 14px;
            }

            .profile-container {
                min-height: 110px;
            }
        }

        @media (max-width: 480px) {
            .main-logo .logo-size {
                width: 13rem;
                height: 13rem;
            }

            .text-6xl {
                font-size: 1.75rem;
            }

            .typing-text {
                font-size: 0.9rem;
            }

            .profile-container .w-28 {
                width: 4.5rem;
                height: 4.5rem;
            }

            .status-dot {
                width: 12px;
                height: 12px;
            }

            .profile-container {
                min-height: 100px;
                padding: 0.5rem;
            }
        }

        /* Updated Responsive Grid */
        .responsive-grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            max-width: 60rem;
            width: 100%;
            margin: 0 auto;
            place-content: center;
            place-items: center;
            box-sizing: border-box;
            padding: 0 1rem;
        }

        /* 3 columns on tablets */
        @media (max-width: 1024px) {
            .responsive-grid {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 0.75rem;
            }

            .profile-container {
                max-width: 160px;
            }
        }

        /* 2 columns on phones */
        @media (max-width: 768px) {
            .responsive-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 0.5rem;
                max-width: 95vw;
            }

            .profile-container {
                max-width: 140px;
            }
        }

        /* 1 column on very small phones */
        @media (max-width: 480px) {
            .responsive-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 0.375rem;
                max-width: 100vw;
            }

            .profile-container {
                max-width: 120px;
            }
        }

        .discord-link {
            display: flex;
            justify-content: center;
            width: 100%;
        }

        .profile-container {
            width: 100%;
            max-width: 180px;
            /* Adjust based on your preferred max size */
        }

        /* Notification style */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            border-left: 4px solid #444;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .profile-image-wrapper>div {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-image-wrapper img[alt="Decoration"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            pointer-events: none;
            transform: scale(1.2);
            z-index: 1;
        }

        .profile-image {
            position: relative;
            z-index: 0;
        }

        /* Footer animation */
        .footer-info {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            transition-delay: 0.6s;
        }

        body.loaded .footer-info {
            opacity: 1;
            transform: translateY(0);
        }

        /* Grid item animation */
        .grid-item {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        body.loaded .grid-item {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom scrollbar for main content */
        body.loaded::-webkit-scrollbar {
            width: 8px;
        }

        body.loaded::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        body.loaded::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        body.loaded::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body class="bg-black">
    <!-- Preloader -->
    <div id="preloader">
        <img src="44logo.png" alt="Loading..." class="preloader-logo">
        <div class="preloader-progress">
            <div class="preloader-progress-bar"></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <div id="particles-js"></div>

    <div class="main-container">
        <!-- Main Header -->
        <div class="text-center mb-12">
            <div class="main-logo mb-10 mt-30">
                <div class="logo-size w-50 h-50 mx-auto relative">
                    <img src="44logo.png" alt="444.exclsv" class="w-full h-full object-contain">
                </div>
            </div>
            <div class="typing-container">
                <p class="typing-text" id="typingText"></p>
            </div>
        </div>

        <!-- User Grid -->
        <div class="responsive-grid" id="profileGrid">
            <!-- Profiles will be loaded here dynamically -->
        </div>

        <!-- Footer Info -->
        <div class="mt-16 text-center footer-info">
            <p class="text-gray-400 text-sm font-medium">Click profiles to view information</p>
        </div>
    </div>

    <script>
        // Preloader animation
        function animatePreloader() {
            const preloader = document.getElementById('preloader');
            const progressBar = document.querySelector('.preloader-progress-bar');

            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);

                    // Animate preloader out
                    preloader.style.opacity = '0';

                    // Remove preloader after animation
                    setTimeout(() => {
                        preloader.style.display = 'none';
                        document.body.classList.add('loaded');
                        document.body.classList.remove('preloader-active');
                    }, 800);
                }
                progressBar.style.width = `${progress}%`;
            }, 100);
        }

        // Tab title animation
        function animateTabTitle() {
            const animations = [
                "‎ ",
                "@",
                "@4",
                "@44",
                "@444",
                "@444.",
                "@444.e",
                "@444.ex",
                "@444.exl",
                "@444.exlu",
                "@444.exlu$",
                "@444.exlu$v"
            ];
            let index = 0;
            setInterval(() => {
                document.title = animations[index];
                index = (index + 1) % animations.length;
            }, 400);
        }

        // Start animations when page loads
        window.addEventListener('load', () => {
            animatePreloader();
            animateTabTitle();
        });

        // Discord user IDs with custom href links
        const users = [
            { id: '701884156237578311', href: 'http://www.444exlusv.world/towfu' },
            { id: '454812651394957322', href: 'http://www.444exlusv.world/saito' },
            { id: '1006749334513143818', href: '#' }
        ];

        // Function to show notification
        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }

        // Function to get status text from user data
        function getStatusText(userData) {
            if (!userData || !userData.activities || userData.activities.length === 0) {
                return '444.exlu$v';
            }

            const customStatus = userData.activities.find(activity => activity.type === 4);
            if (customStatus && customStatus.state) {
                return customStatus.state;
            }

            const gameActivity = userData.activities.find(activity => activity.type === 0);
            if (gameActivity) {
                return `Playing ${gameActivity.name}`;
            }

            const listeningActivity = userData.activities.find(activity => activity.type === 2);
            if (listeningActivity) {
                return `Listening to ${listeningActivity.name}`;
            }

            return 'Online';
        }

        // Function to create profile HTML with real-time capabilities
        function createProfileHTML(user, userData = null, index = 0) {
            const status = userData?.discord_status || 'offline';
            const avatarUrl = userData?.discord_user?.avatar
                ? `https://cdn.discordapp.com/avatars/${user.id}/${userData.discord_user.avatar}.${userData.discord_user.avatar.startsWith('a_') ? 'gif' : 'png'}?size=256`
                : `https://cdn.discordapp.com/embed/avatars/${Math.floor(Math.random() * 5)}.png`;

            // Avatar decoration handling
            const hasDecoration = userData?.discord_user?.avatar_decoration_data;
            const decorationUrl = hasDecoration
                ? `https://cdn.discordapp.com/avatar-decoration-presets/${userData.discord_user.avatar_decoration_data.asset}.png`
                : null;

            // Display name with fallbacks
            const displayName = userData?.discord_user?.global_name ||
                userData?.discord_user?.display_name ||
                userData?.discord_user?.username ||
                `User ${user.id.slice(-4)}`;

            const statusText = getStatusText(userData);
            const hasActivity = userData?.activities && userData.activities.length > 0;
            const isHashLink = user.href === '#';

            // Unique ID for real-time updates
            const profileId = `profile-${user.id}`;

            return `
<a href="${isHashLink ? 'javascript:void(0);' : user.href}" 
   class="discord-link grid-item" 
   style="--delay: ${index};" 
   ${isHashLink ? 'onclick="return false;"' : ''}
   id="${profileId}">
    <div class="profile-container glass-effect group relative" data-user-id="${user.id}">
        ${hasActivity ? '<div class="activity-indicator"></div>' : ''}
        <div class="profile-image-wrapper relative inline-block">
            <div class="w-28 h-28 rounded-full overflow-hidden bg-gradient-to-br from-gray-800 to-black flex items-center justify-center">
                <img src="${avatarUrl}" 
                     alt="${displayName}" 
                     class="profile-image w-full h-full object-cover"
                     onerror="this.onerror=null;this.src='https://cdn.discordapp.com/embed/avatars/${Math.floor(Math.random() * 5)}.png'"
                     data-avatar-id="${userData?.discord_user?.avatar || ''}">
                ${hasDecoration ? `
                    <img src="${decorationUrl}" 
                         alt="Decoration"
                         class="avatar-decoration absolute inset-0 w-full h-full object-contain pointer-events-none"
                         style="transform: scale(1.2)"
                         data-decoration-id="${userData.discord_user.avatar_decoration_data.asset}">
                ` : ''}
            </div>
            <div class="status-dot status-${status}" data-status="${status} "></div>
        </div>
        <p class="text-white text-sm profile-name" data-user-id="${user.id}">${displayName}</p>
        <p class="status-text" data-user-id="${user.id}">${statusText}</p>
    </div>
</a>
    `;
        }

        // WebSocket connection for real-time updates
        let socket = null;

        function connectWebSocket() {
            socket = new WebSocket('wss://api.lanyard.rest/socket');

            socket.addEventListener('open', () => {
                console.log('Connected to Lanyard WebSocket');
                socket.send(JSON.stringify({
                    op: 2,
                    d: {
                        subscribe_to_ids: users.map(user => user.id)
                    }
                }));
            });

            socket.addEventListener('message', (event) => {
                const data = JSON.parse(event.data);

                if (data.t === 'INIT_STATE' || data.t === 'PRESENCE_UPDATE') {
                    const userId = data.d.discord_user.id;
                    updateProfileRealTime(userId, data.d);
                }
            });

            socket.addEventListener('error', (error) => {
                console.error('WebSocket error:', error);
                setTimeout(connectWebSocket, 5000);
            });

            socket.addEventListener('close', () => {
                console.log('WebSocket disconnected, reconnecting...');
                setTimeout(connectWebSocket, 1000);
            });
        }

        // Real-time profile updater
        function updateProfileRealTime(userId, userData) {
            const profileElement = document.querySelector(`[data-user-id="${userId}"]`);
            if (!profileElement) return;

            // Update status dot
            const status = userData.discord_status || 'offline';
            const statusDot = profileElement.querySelector('.status-dot');
            if (statusDot) {
                statusDot.className = `status-dot status-${status}`;
                statusDot.setAttribute('data-status', status);
            }

            // Update avatar if changed
            const avatarElement = profileElement.querySelector('.profile-image');
            if (avatarElement && userData.discord_user?.avatar) {
                const currentAvatarId = avatarElement.getAttribute('data-avatar-id');
                if (currentAvatarId !== userData.discord_user.avatar) {
                    const newAvatarUrl = `https://cdn.discordapp.com/avatars/${userId}/${userData.discord_user.avatar}.${userData.discord_user.avatar.startsWith('a_') ? 'gif' : 'png'
                        }?size=256`;
                    avatarElement.src = newAvatarUrl;
                    avatarElement.setAttribute('data-avatar-id', userData.discord_user.avatar);
                }
            }

            // Update avatar decoration
            const decorationElement = profileElement.querySelector('.avatar-decoration');
            const hasDecoration = userData.discord_user?.avatar_decoration_data;

            if (hasDecoration) {
                const currentDecorationId = decorationElement?.getAttribute('data-decoration-id');
                const newDecorationId = userData.discord_user.avatar_decoration_data.asset;

                if (!decorationElement || currentDecorationId !== newDecorationId) {
                    const decorationUrl = `https://cdn.discordapp.com/avatar-decoration-presets/${newDecorationId}.png`;

                    if (decorationElement) {
                        decorationElement.src = decorationUrl;
                        decorationElement.setAttribute('data-decoration-id', newDecorationId);
                    } else {
                        const decorationHTML = `
                    <img src="${decorationUrl}" 
                         alt="Decoration"
                         class="avatar-decoration absolute inset-0 w-full h-full object-contain pointer-events-none"
                         style="transform: scale(1.2)"
                         data-decoration-id="${newDecorationId}">
                `;
                        profileElement.querySelector('.profile-image-wrapper div').insertAdjacentHTML('beforeend', decorationHTML);
                    }
                }
            } else if (decorationElement) {
                decorationElement.remove();
            }

            // Update display name
            const displayName = userData.discord_user?.global_name ||
                userData.discord_user?.display_name ||
                userData.discord_user?.username ||
                `User ${userId.slice(-4)}`;
            const nameElement = profileElement.querySelector('.profile-name');
            if (nameElement) {
                nameElement.textContent = displayName;
            }

            // Update status text
            const statusText = getStatusText(userData);
            const statusTextElement = profileElement.querySelector('.status-text');
            if (statusTextElement) {
                statusTextElement.textContent = statusText;
            }

            // Update activity indicator
            const hasActivity = userData.activities && userData.activities.length > 0;
            const activityIndicator = profileElement.querySelector('.activity-indicator');

            if (hasActivity && !activityIndicator) {
                profileElement.insertAdjacentHTML('afterbegin', '<div class="activity-indicator"></div>');
            } else if (!hasActivity && activityIndicator) {
                activityIndicator.remove();
            }
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            // First render all profiles
            const profileGrid = document.getElementById('profileGrid');
            profileGrid.innerHTML = users.map((user, index) =>
                createProfileHTML(user, null, index)
            ).join('');

            // Connect WebSocket for real-time updates
            connectWebSocket();

            // Initial AJAX fetch as fallback
            users.forEach(async (user) => {
                try {
                    const response = await fetch(`https://api.lanyard.rest/v1/users/${user.id}`);
                    if (response.ok) {
                        const data = await response.json();
                        updateProfileRealTime(user.id, data.data);
                    }
                } catch (error) {
                    console.error('Failed to fetch initial data:', error);
                }
            });
        });

        // Function to update profile data
        function updateProfile(userId, userData) {
            const profileElement = document.querySelector(`.profile-container[data-user-id="${userId}"]`);
            if (!profileElement) return;

            const status = userData?.discord_status || 'offline';
            const statusText = getStatusText(userData);
            const hasActivity = userData?.activities && userData.activities.length > 0;
            const hasDecoration = userData?.discord_user?.avatar_decoration_data;

            // Update status dot
            const statusDot = profileElement.querySelector('.status-dot');
            if (statusDot) {
                statusDot.classList.remove('status-online', 'status-idle', 'status-dnd', 'status-offline');
                statusDot.classList.add(`status-${status}`);
            }

            // Update status text
            const statusTextElement = profileElement.querySelector('.status-text');
            if (statusTextElement) {
                statusTextElement.textContent = statusText;
            }

            // Update activity indicator
            const activityIndicator = profileElement.querySelector('.activity-indicator');
            if (hasActivity) {
                if (!activityIndicator) {
                    profileElement.insertAdjacentHTML('afterbegin', '<div class="activity-indicator"></div>');
                }
            } else if (activityIndicator) {
                activityIndicator.remove();
            }

            // Update avatar if changed
            const avatarElement = profileElement.querySelector('.profile-image');
            if (avatarElement && userData?.discord_user?.avatar) {
                const newAvatarUrl = `https://cdn.discordapp.com/avatars/${userId}/${userData.discord_user.avatar}.${userData.discord_user.avatar.startsWith('a_') ? 'gif' : 'png'}?size=256`;
                if (avatarElement.src !== newAvatarUrl) {
                    avatarElement.src = newAvatarUrl;
                }
            }

            // Update decoration if changed
            const decorationContainer = profileElement.querySelector('.profile-image-wrapper > div');
            const existingDecoration = decorationContainer.querySelector('img[alt="Decoration"]');

            if (hasDecoration) {
                const decorationUrl = `https://cdn.discordapp.com/avatar-decoration-presets/${userData.discord_user.avatar_decoration_data.asset}.png`;

                if (existingDecoration) {
                    if (existingDecoration.src !== decorationUrl) {
                        existingDecoration.src = decorationUrl;
                    }
                } else {
                    decorationContainer.insertAdjacentHTML('beforeend', `
                <img src="${decorationUrl}" 
                     alt="Decoration"
                     class="absolute inset-0 w-full h-full object-contain pointer-events-none"
                     style="transform: scale(1.2)">
            `);
                }
            } else if (existingDecoration) {
                existingDecoration.remove();
            }

            // Update display name if changed
            const nameElement = profileElement.querySelector('.profile-name');
            if (nameElement) {
                const newName = userData?.discord_user?.global_name ||
                    userData?.discord_user?.display_name ||
                    userData?.discord_user?.username ||
                    `User ${userId.slice(-4)}`;

                if (nameElement.textContent !== newName) {
                    nameElement.textContent = newName;
                }
            }
        }

        // Function to load user data from Lanyard API with AJAX
        async function loadUserData(user, retries = 3, timeout = 8000) {
            for (let attempt = 1; attempt <= retries; attempt++) {
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), timeout);

                    const response = await fetch(`https://api.lanyard.rest/v1/users/${user.id}`, {
                        signal: controller.signal
                    });

                    clearTimeout(timeoutId);

                    if (response.ok) {
                        const data = await response.json();
                        return data.data;
                    }
                } catch (error) {
                    console.warn(`Attempt ${attempt} failed for user ${user.id}:`, error);
                    if (attempt === retries) {
                        return null;
                    }
                }
                await new Promise(resolve => setTimeout(resolve, 1000 * attempt));
            }
            return null;
        }

        // Function to initialize profiles with AJAX
        async function initializeProfiles() {
            const profileGrid = document.getElementById('profileGrid');

            // First load - show skeleton profiles
            profileGrid.innerHTML = users.map((user, index) =>
                createProfileHTML(user, null, index)
            ).join('');

            // Then load actual data
            try {
                const userDataPromises = users.map(user => loadUserData(user));
                const allUserData = await Promise.all(userDataPromises);

                // Update profiles with real data
                users.forEach((user, index) => {
                    if (allUserData[index]) {
                        updateProfile(user.id, allUserData[index]);
                    }
                });

                // Start periodic updates
                startPeriodicUpdates();

            } catch (error) {
                console.error('Error loading profiles:', error);
                showNotification('Failed to load real-time data. Using cached information.', 5000);
            }
        }

        // Function to start periodic updates via AJAX
        function startPeriodicUpdates() {
            // Update all profiles every 30 seconds
            const updateInterval = setInterval(async () => {
                try {
                    const userDataPromises = users.map(user => loadUserData(user));
                    const allUserData = await Promise.all(userDataPromises);

                    users.forEach((user, index) => {
                        if (allUserData[index]) {
                            updateProfile(user.id, allUserData[index]);
                        }
                    });
                } catch (error) {
                    console.error('Error during periodic update:', error);
                }
            }, 30000); // 30 seconds

            // Clean up interval when page unloads
            window.addEventListener('beforeunload', () => {
                clearInterval(updateInterval);
            });
        }

        // Initialize particles
        particlesJS("particles-js", {
            particles: {
                number: {
                    value: 80,
                    density: {
                        enable: true,
                        value_area: 800
                    }
                },
                color: {
                    value: ["#ffffff", "#cccccc", "#999999", "#666666"]
                },
                shape: {
                    type: "circle"
                },
                opacity: {
                    value: 0.4,
                    random: true,
                    anim: {
                        enable: true,
                        speed: 1,
                        opacity_min: 0.1
                    }
                },
                size: {
                    value: 3,
                    random: true,
                    anim: {
                        enable: true,
                        speed: 2,
                        size_min: 0.5
                    }
                },
                move: {
                    enable: true,
                    speed: 1,
                    direction: "none",
                    random: true,
                    straight: false,
                    out_mode: "out"
                }
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: {
                        enable: true,
                        mode: "bubble"
                    },
                    onclick: {
                        enable: true,
                        mode: "push"
                    }
                },
                modes: {
                    bubble: {
                        distance: 200,
                        size: 6,
                        duration: 2,
                        opacity: 0.8
                    },
                    push: {
                        particles_nb: 4
                    }
                }
            },
            retina_detect: true
        });

        // Typing animation class
        class TypingAnimator {
            constructor(element) {
                this.element = element;
                this.messages = [
                    "444.exlu$v"
                ];
                this.currentMessage = 0;
                this.charIndex = 0;
                this.isDeleting = false;
                this.typingSpeed = 150;
                this.deletingSpeed = 50;
                this.pauseBetweenMessages = 2000;
            }

            start() {
                setTimeout(() => this.type(), 1000);
            }

            type() {
                const fullText = this.messages[this.currentMessage];

                if (this.isDeleting) {
                    this.charIndex--;
                    this.element.textContent = fullText.substring(0, this.charIndex);

                    if (this.charIndex === 0) {
                        this.isDeleting = false;
                        this.currentMessage = (this.currentMessage + 1) % this.messages.length;
                        setTimeout(() => this.type(), this.typingSpeed);
                    } else {
                        setTimeout(() => this.type(), this.deletingSpeed);
                    }
                } else {
                    this.charIndex++;
                    this.element.textContent = fullText.substring(0, this.charIndex);

                    if (this.charIndex === fullText.length) {
                        this.isDeleting = true;
                        setTimeout(() => this.type(), this.pauseBetweenMessages);
                    } else {
                        setTimeout(() => this.type(), this.typingSpeed);
                    }
                }
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeProfiles();

            const typingElement = document.getElementById('typingText');
            const typingAnimator = new TypingAnimator(typingElement);
            typingAnimator.start();

            // Disable developer tools
            document.addEventListener('contextmenu', e => e.preventDefault());
            document.addEventListener('keydown', function (e) {
                if (e.key === 'F12' ||
                    (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
                    (e.ctrlKey && e.key === 'U')) {
                    e.preventDefault();
                }
            });
        });

        // When page loads
        document.body.classList.add('preloader-active');


        // Disable right-click context menu
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });

        // Disable common inspect shortcuts
        document.addEventListener('keydown', function (e) {
            // Prevent F12
            if (e.key === 'F12') {
                e.preventDefault();
            }
            // Prevent Ctrl+Shift+I (Inspect)
            if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                e.preventDefault();
            }
            // Prevent Ctrl+Shift+J (Console)
            if (e.ctrlKey && e.shiftKey && e.key === 'J') {
                e.preventDefault();
            }
            // Prevent Ctrl+Shift+C (Inspect Element)
            if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                e.preventDefault();
            }
            // Prevent Ctrl+U (View Source)
            if (e.ctrlKey && e.key === 'U') {
                e.preventDefault();
            }
        });

        // Load disable-devtool after other scripts to minimize interference
        // Use custom configuration to allow network requests
        const disableDevtoolScript = document.createElement('script');
        disableDevtoolScript.src = 'https://cdn.jsdelivr.net/npm/disable-devtool@latest';
        disableDevtoolScript.setAttribute('disable-devtool-auto', '');
        disableDevtoolScript.onload = () => {
            if (window.DisableDevtool) {
                window.DisableDevtool({
                    disableMenu: true, // Disable right-click menu
                    disableSelect: false, // Allow text selection
                    disableCopy: false, // Allow copying
                    disableCut: false, // Allow cutting
                    disablePaste: false, // Allow pasting
                    clearLog: false, // Keep console logs
                    detectors: ['f12', 'ctrlShiftI', 'ctrlShiftJ', 'ctrlShiftC', 'ctrlU'], // Specific shortcuts to block
                    ondevtoolopen: () => {
                        // Optional: Redirect or show message instead of closing tab
                        console.warn('Developer tools detected.');
                    }
                });
            }
        };
        document.body.appendChild(disableDevtoolScript);



    </script>
</body>

</html>
